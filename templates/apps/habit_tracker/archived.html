{% extends "base.html" %}

{% block title %}Archived Habits â€¢ Student Starter Pack{% endblock %}

{% block extra_head %}
<style>
    .habit-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    [data-theme="dark"] .text-gray-900 {
        color: var(--text-primary);
    }

    [data-theme="dark"] .text-gray-700,
    [data-theme="dark"] .text-gray-600,
    [data-theme="dark"] .text-gray-500,
    [data-theme="dark"] .text-gray-400 {
        color: var(--text-secondary);
    }

    [data-theme="dark"] .bg-white {
        background-color: var(--bg-primary);
    }

    [data-theme="dark"] .border-gray-100,
    [data-theme="dark"] .border-gray-200 {
        border-color: var(--border-color);
    }

    [data-theme="dark"] .bg-gray-50,
    [data-theme="dark"] .bg-gray-100 {
        background-color: var(--bg-secondary);
    }

    [data-theme="dark"] .group:hover {
        background-color: rgba(255, 255, 255, 0.05) !important;
    }

    [data-theme="dark"] .bg-gray-200 {
        background-color: rgba(255, 255, 255, 0.1);
    }

    [data-theme="dark"] .hover\:bg-gray-100:hover {
        background-color: rgba(255, 255, 255, 0.05);
    }

    [data-theme="dark"] .hover\:bg-red-50:hover {
        background-color: rgba(239, 68, 68, 0.1);
    }

    [data-theme="dark"] .hover\:bg-green-50:hover {
        background-color: rgba(34, 197, 94, 0.1);
    }
</style>
{% endblock %}

{% block content %}
<div class="mb-8">
    <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-4">
            <div class="p-3 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl text-white">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                </svg>
            </div>
            <div>
                <h2 class="text-3xl font-bold text-gray-900">Archived Habits</h2>
                <p class="text-gray-600">Past habits you've completed or paused</p>
            </div>
        </div>
        <a href="/habit-tracker" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors inline-flex items-center gap-2">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
            Back to Active Habits
        </a>
    </div>
</div>

<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
    {% if habits %}
        <div class="space-y-3">
            {% for habit in habits %}
            <div class="group p-4 rounded-lg border border-gray-200 bg-gray-50 hover:bg-gray-100 transition-all duration-200">
                <div class="flex items-start justify-between mb-2">
                    <div class="flex items-center gap-2">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                        </svg>
                        <span class="font-medium text-gray-700">{{ habit.name }}</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full">
                            Archived {{ habit.archived_at.strftime('%b %d, %Y') if habit.archived_at else '' }}
                        </span>
                        <!-- Unarchive Button -->
                        <form method="POST" action="/habit-tracker/unarchive/{{ habit.id }}" class="inline">
                            <button type="submit"
                                class="text-green-500 hover:text-green-700 transition-colors duration-200 p-1 hover:bg-green-50 rounded"
                                title="Restore habit">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                            </button>
                        </form>
                        <!-- Delete Button -->
                        <form method="POST" action="/habit-tracker/delete/{{ habit.id }}" class="inline">
                            <button type="submit"
                                class="text-red-400 hover:text-red-600 transition-colors duration-200 p-1 hover:bg-red-50 rounded"
                                onclick="return confirm('Permanently delete this habit? This cannot be undone.');"
                                title="Delete permanently">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
                {% if habit.description %}
                    <p class="text-sm text-gray-500 ml-7 italic">
                        {{ habit.description }}
                    </p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-12">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4">
                <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"></path>
                </svg>
            </div>
            <p class="text-gray-500 mb-2">No archived habits</p>
            <p class="text-sm text-gray-400">Habits you archive will appear here</p>
        </div>
    {% endif %}
</div>
{% endblock %}